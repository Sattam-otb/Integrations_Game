<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù„Ø¹Ø¨Ø© ØªÙƒØ§Ù…Ù„ Ø§Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„Ù…Ø«Ù„Ø«ÙŠØ©</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <h1>Ù„Ø¹Ø¨Ø© ØªÙƒØ§Ù…Ù„ Ø§Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„Ù…Ø«Ù„Ø«ÙŠØ©</h1>
        <p>Ø§Ù„Ø³Ø¤Ø§Ù„ Ø±Ù‚Ù…: <span id="question-number">{{ question_number }}</span> / {{ total_questions }}</p>
        <div class="question" id="question">{{ question }}</div>
        <form id="answer-form">
            <div class="options">
                {% for option in options %}
                    <label>
                        <input type="radio" name="answer" value="{{ option }}">
                        <span>{{ option }} + C</span>
                    </label>
                {% endfor %}
            </div>
            <button type="button" onclick="checkAnswer()">ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©</button>
        </form>
        <div class="result" id="result"></div>
        <div class="score">Ø§Ù„Ù†Ù‚Ø§Ø·: <span id="current-score">{{ score }}</span></div>
    </div>

    <script>
        async function checkAnswer() {
            const formData = new FormData(document.getElementById('answer-form'));
            const response = await fetch('/check_answer', {
                method: 'POST',
                body: formData
            });
            const data = await response.json();
            const resultDiv = document.getElementById('result');
            const scoreSpan = document.getElementById('current-score');
            const answerForm = document.getElementById('answer-form');
            const options = answerForm.querySelectorAll('input[type="radio"]');

            if (data.result === 'correct') {
                resultDiv.textContent = 'Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©! ðŸ‘';
            } else {
                resultDiv.textContent = `Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø©. Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø© Ù‡ÙŠ: ${data.correct_answer} + C`;
            }
            scoreSpan.textContent = data.score;

            // ØªØ¹Ø·ÙŠÙ„ Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª Ø¨Ø¹Ø¯ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©
            options.forEach(option => {
                option.disabled = true;
            });

            // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ Ø¨Ø¹Ø¯ ÙØªØ±Ø© Ù‚ØµÙŠØ±Ø©
            setTimeout(() => {
                window.location.href = '/question';
            }, 1500);
        }
    </script>
</body>
</html>